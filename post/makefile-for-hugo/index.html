<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta name="generator" content="Hugo 0.21-DEV" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hugo Délire ! | Xakz&#39;s</title>
    <meta name="description" content="Ou comment se faciliter la vie pour la publication de son site
sur github.io avec Hugo (en la rendant d&#39;abord plus compliquée)
">
    <meta name="keywords" content="hugo, makefile, git, github-pages">
    
    
    
    
    

  <meta name="author" content="Xakz">


    <meta property="og:title" content="Hugo Délire !" />
<meta property="og:description" content="Ou comment se faciliter la vie pour la publication de son site
sur github.io avec Hugo (en la rendant d&#39;abord plus compliquée)
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://xakz.github.io/post/makefile-for-hugo/" />



<meta property="article:published_time" content="2017-04-30T18:54:04&#43;02:00"/>
<meta property="article:modified_time" content="2017-04-30T18:54:04&#43;02:00"/>











    




    <meta name="theme-color" content="#000">

    
    
    
    <link rel="canonical" href="http://xakz.github.io/post/makefile-for-hugo/">
    
    
    <link rel="icon" sizes="any" href="data:image/svg+xml,%3Csvg%20viewBox='0%200%2046%2045'%20xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EAfter%20Dark%3C/title%3E%3Cpath%20d='M.708%2045L23%20.416%2045.292%2045H.708zM35%2038L23%2019%2011%2038h24z'%20fill='%23000'/%3E%3C/svg%3E">

    <style>
      html{font-size:12px}*{box-sizing:border-box;text-rendering:geometricPrecision}body{font-size:1rem;line-height:1.5rem;margin:0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;word-wrap:break-word}h1,h2,h3,h4,h5,h6{line-height:1.3em}fieldset{border:none;padding:0;margin:0}pre{padding:2rem;margin:1.75rem 0;background-color:#fff;border:1px solid #ccc;overflow:auto}code[class*=language-],pre[class*=language-],pre code{font-weight:100;text-shadow:none;margin:1.75rem 0}a{cursor:pointer;color:#ff2e88;text-decoration:none;border-bottom:1px solid #ff2e88}a:hover{background-color:#ff2e88;color:#fff}.grid{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.grid.\-top{-ms-flex-align:start;-ms-grid-row-align:flex-start;align-items:flex-start}.grid.\-middle{-ms-flex-align:center;-ms-grid-row-align:center;align-items:center}.grid.\-bottom{-ms-flex-align:end;-ms-grid-row-align:flex-end;align-items:flex-end}.grid.\-stretch{-ms-flex-align:stretch;-ms-grid-row-align:stretch;align-items:stretch}.grid.\-baseline{-ms-flex-align:baseline;-ms-grid-row-align:baseline;align-items:baseline}.grid.\-left{-ms-flex-pack:start;justify-content:flex-start}.grid.\-center{-ms-flex-pack:center;justify-content:center}.grid.\-right{-ms-flex-pack:end;justify-content:flex-end}.grid.\-between{-ms-flex-pack:justify;justify-content:space-between}.grid.\-around{-ms-flex-pack:distribute;justify-content:space-around}.cell{-ms-flex:1;flex:1;box-sizing:border-box}@media screen and (min-width:768px){.cell.\-1of12{-ms-flex:0 0 8.33333%;flex:0 0 8.33333%}.cell.\-2of12{-ms-flex:0 0 16.66667%;flex:0 0 16.66667%}.cell.\-3of12{-ms-flex:0 0 25%;flex:0 0 25%}.cell.\-4of12{-ms-flex:0 0 33.33333%;flex:0 0 33.33333%}.cell.\-5of12{-ms-flex:0 0 41.66667%;flex:0 0 41.66667%}.cell.\-6of12{-ms-flex:0 0 50%;flex:0 0 50%}.cell.\-7of12{-ms-flex:0 0 58.33333%;flex:0 0 58.33333%}.cell.\-8of12{-ms-flex:0 0 66.66667%;flex:0 0 66.66667%}.cell.\-9of12{-ms-flex:0 0 75%;flex:0 0 75%}.cell.\-10of12{-ms-flex:0 0 83.33333%;flex:0 0 83.33333%}.cell.\-11of12{-ms-flex:0 0 91.66667%;flex:0 0 91.66667%}}@media screen and (max-width:768px){.grid{-ms-flex-direction:column;flex-direction:column}.cell{-ms-flex:0 0 auto;flex:0 0 auto}}.hack,.hack blockquote,.hack code,.hack em,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack strong{font-size:1rem;font-style:normal;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif}.hack blockquote,.hack code,.hack em,.hack strong{line-height:20px}.hack blockquote,.hack code,.hack footer,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack header,.hack li,.hack ol,.hack p,.hack section,.hack ul{float:none;margin:0;padding:0}.hack blockquote,.hack h1,.hack ol,.hack p,.hack ul{margin-top:20px;margin-bottom:20px}.hack h1{position:relative;display:inline-block;display:table-cell;padding:20px 0 30px;margin:0;overflow:hidden}.hack h1:after{content:"====================================================================================================";position:absolute;bottom:10px;left:0}.hack h1+*{margin-top:0}.hack h2,.hack h3,.hack h4,.hack h5,.hack h6{position:relative;margin-bottom:1.75rem}.hack h2:before,.hack h3:before,.hack h4:before,.hack h5:before,.hack h6:before{display:inline}.hack h2:before{content:"## "}.hack h3:before{content:"### "}.hack h4:before{content:"#### "}.hack h5:before{content:"##### "}.hack h6:before{content:"###### "}.hack li{position:relative;display:block;padding-left:20px}.hack li:after{position:absolute;top:0;left:0}.hack ul>li:after{content:"-"}.hack ol{counter-reset:a}.hack ol>li:after{content:counter(a) ".";counter-increment:a}.hack blockquote{position:relative;padding-left:17px;padding-left:2ch;overflow:hidden}.hack blockquote:after{content:">\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>";white-space:pre;position:absolute;top:0;left:0;line-height:20px}.hack em:after,.hack em:before{content:"*";display:inline}.hack pre code:after,.hack pre code:before{content:''}.hack code{font-weight:700}.hack code:after,.hack code:before{content:"`";display:inline}.hack hr{position:relative;height:20px;overflow:hidden;border:0;margin:20px 0}.hack hr:after{content:"----------------------------------------------------------------------------------------------------";position:absolute;top:0;left:0;line-height:20px;width:100%;word-wrap:break-word}@-moz-document url-prefix(){.hack h1{display:block}}.hack-ones ol>li:after{content:"1."}p{margin:0 0 1.75rem}.container{max-width:70rem}.container,.container-fluid{margin:0 auto;padding:0 1rem}.inner{padding:1rem}.inner2x{padding:2rem}.pull-left{float:left}.pull-right{float:right}.progress-bar{height:8px;opacity:.8;background-color:#ccc;margin-top:12px}.progress-bar.progress-bar-show-percent{margin-top:38px}.progress-bar-filled{background-color:gray;height:100%;transition:width .3s ease;position:relative;width:0}.progress-bar-filled:before{content:'';border:6px solid transparent;border-top-color:gray;position:absolute;top:-12px;right:-6px}.progress-bar-filled:after{color:gray;content:attr(data-filled);display:block;font-size:12px;white-space:nowrap;position:absolute;border:6px solid transparent;top:-38px;right:0;-ms-transform:translateX(50%);transform:translateX(50%)}table{width:100%;border-collapse:collapse;margin:1.75rem 0;color:#778087}table td,table th{vertical-align:top;border:1px solid #ccc;line-height:15px;padding:10px}table thead th{font-size:10px}table tbody td:first-child{font-weight:700;color:#333}.form{width:30rem}.form-group{margin-bottom:1.75rem;overflow:auto}.form-group label{border-bottom:2px solid #ccc;color:#333;width:10rem;display:inline-block;height:38px;line-height:38px;padding:0;float:left;position:relative}.form-group.form-success label{color:#4caf50!important;border-color:#4caf50!important}.form-group.form-warning label{color:#ff9800!important;border-color:#ff9800!important}.form-group.form-error label{color:#f44336!important;border-color:#f44336!important}.form-control{outline:none;border:none;border-bottom:2px solid #ccc;padding:.5rem 0;width:20rem;height:38px;background-color:transparent}.form-control:focus{border-color:#555}.form-group.form-textarea label:after{position:absolute;content:'';width:2px;background-color:#fff;right:-2px;top:0;bottom:0}textarea.form-control{height:auto;resize:none;padding:1rem 0;border-bottom:2px solid #ccc;border-left:2px solid #ccc;padding:.5rem}select.form-control{border-radius:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none}.help-block{color:#999;margin-top:.5rem}.form-actions{margin-bottom:1.75rem}.btn{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;outline:none;padding:.65rem 2rem;font-size:1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;z-index:1}.btn:active{box-shadow:inset 0 1px 3px rgba(0,0,0,.12)}.btn.btn-ghost{border-color:#757575;color:#757575;background-color:transparent}.btn.btn-ghost:focus,.btn.btn-ghost:hover{border-color:#424242;color:#424242;z-index:2}.btn.btn-ghost:hover{background-color:transparent}.btn-block{width:100%;display:-ms-flexbox;display:flex}.btn-default{color:#fff;background-color:#e0e0e0;border:1px solid #e0e0e0;color:#333}.btn-default:focus:not(.btn-ghost),.btn-default:hover{background-color:#dcdcdc;border-color:#dcdcdc}.btn-success{color:#fff;background-color:#4caf50;border:1px solid #4caf50}.btn-success:focus:not(.btn-ghost),.btn-success:hover{background-color:#43a047;border-color:#43a047}.btn-success.btn-ghost{border-color:#4caf50;color:#4caf50}.btn-success.btn-ghost:focus,.btn-success.btn-ghost:hover{border-color:#388e3c;color:#388e3c;z-index:2}.btn-error{color:#fff;background-color:#f44336;border:1px solid #f44336}.btn-error:focus:not(.btn-ghost),.btn-error:hover{background-color:#e53935;border-color:#e53935}.btn-error.btn-ghost{border-color:#f44336;color:#f44336}.btn-error.btn-ghost:focus,.btn-error.btn-ghost:hover{border-color:#d32f2f;color:#d32f2f;z-index:2}.btn-warning{color:#fff;background-color:#ff9800;border:1px solid #ff9800}.btn-warning:focus:not(.btn-ghost),.btn-warning:hover{background-color:#fb8c00;border-color:#fb8c00}.btn-warning.btn-ghost{border-color:#ff9800;color:#ff9800}.btn-warning.btn-ghost:focus,.btn-warning.btn-ghost:hover{border-color:#f57c00;color:#f57c00;z-index:2}.btn-info{color:#fff;background-color:#00bcd4;border:1px solid #00bcd4}.btn-info:focus:not(.btn-ghost),.btn-info:hover{background-color:#00acc1;border-color:#00acc1}.btn-info.btn-ghost{border-color:#00bcd4;color:#00bcd4}.btn-info.btn-ghost:focus,.btn-info.btn-ghost:hover{border-color:#0097a7;color:#0097a7;z-index:2}.btn-primary{color:#fff;background-color:#2196f3;border:1px solid #2196f3}.btn-primary:focus:not(.btn-ghost),.btn-primary:hover{background-color:#1e88e5;border-color:#1e88e5}.btn-primary.btn-ghost{border-color:#2196f3;color:#2196f3}.btn-primary.btn-ghost:focus,.btn-primary.btn-ghost:hover{border-color:#1976d2;color:#1976d2;z-index:2}.btn-group{overflow:auto}.btn-group .btn{float:left}.btn-group .btn-ghost:not(:first-child){margin-left:-1px}.card{border:1px solid #ccc}.card .card-header{color:#333;text-align:center;background-color:#ddd;padding:.5rem 0}.alert{color:#ccc;padding:1rem;border:1px solid #ccc;margin-bottom:1.75rem}.alert-success{color:#4caf50;border-color:#4caf50}.alert-error{color:#f44336;border-color:#f44336}.alert-info{color:#00bcd4;border-color:#00bcd4}.alert-warning{color:#ff9800;border-color:#ff9800}.media:not(:last-child){margin-bottom:1.25rem}.media-left{padding-right:1rem}.media-left,.media-right{display:table-cell;vertical-align:top}.media-right{padding-left:1rem}.media-body{display:table-cell;vertical-align:top}.media-heading{font-size:1.16667rem;font-weight:700}.media-content{margin-top:.3rem}.avatarholder,.placeholder{background-color:#f0f0f0;text-align:center;color:#b9b9b9;font-size:1rem;border:1px solid #f0f0f0}.avatarholder{width:48px;height:48px;line-height:46px;font-size:2rem;background-size:cover;background-position:50%;background-repeat:no-repeat}.avatarholder.rounded{border-radius:33px}.loading{height:20px;width:20px;animation:a .6s infinite linear;border:2px solid #e91e63;border-right-color:transparent;border-radius:50%}.btn .loading{display:inline-block;float:left;margin-right:.5rem;width:14px;height:14px}@keyframes a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.menu{width:100%}.menu .menu-item{display:block;color:#616161;border-color:#616161}.menu .menu-item.active,.menu .menu-item:hover{color:#000;border-color:#000;background-color:transparent}@media screen and (max-width:768px){.form-group label{display:block;border-bottom:none;width:100%}.form-group.form-textarea label:after{display:none}.form-control{width:100%}textarea.form-control{border-left:none;padding:.5rem 0}pre::-webkit-scrollbar{height:3px}}@media screen and (max-width:480px){.form{width:100%}}
.dark{color:#ccc}.dark,.dark pre{background-color:#000}.dark pre{padding:0;border:none}.dark pre code{color:#00bcd4}.dark h1 a,.dark h2 a,.dark h3 a,.dark h4 a,.dark h5 a{color:#ccc}.dark code,.dark strong{color:#fff}.dark code{font-weight:100}.dark table{color:#ccc}.dark table td,.dark table th{border-color:#444}.dark table tbody td:first-child{color:#fff}.dark .form-group label{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-group.form-textarea label:after{background-color:#000}.dark .form-control{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-control:focus{border-color:#ccc;color:#ccc}.dark textarea.form-control{color:#ccc}.dark .card{border-color:rgba(95,95,95,.78)}.dark .card .card-header{background-color:transparent;color:#ccc;border-bottom:1px solid rgba(95,95,95,.78)}.dark .btn.btn-ghost.btn-default{border-color:#ababab;color:#ababab}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#9c9c9c;color:#9c9c9c;z-index:1}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#e0e0e0;color:#e0e0e0}.dark .btn.btn-ghost.btn-primary:focus,.dark .btn.btn-ghost.btn-primary:hover{border-color:#64b5f6;color:#64b5f6}.dark .btn.btn-ghost.btn-success:focus,.dark .btn.btn-ghost.btn-success:hover{border-color:#81c784;color:#81c784}.dark .btn.btn-ghost.btn-info:focus,.dark .btn.btn-ghost.btn-info:hover{border-color:#4dd0e1;color:#4dd0e1}.dark .btn.btn-ghost.btn-error:focus,.dark .btn.btn-ghost.btn-error:hover{border-color:#e57373;color:#e57373}.dark .btn.btn-ghost.btn-warning:focus,.dark .btn.btn-ghost.btn-warning:hover{border-color:#ffb74d;color:#ffb74d}.dark .avatarholder,.dark .placeholder{background-color:transparent;border-color:#333}.dark .menu .menu-item{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .menu .menu-item.active,.dark .menu .menu-item:hover{color:#fff;border-color:#ccc}

      @keyframes intro {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.muted {
  color: rgba(255, 255, 255, 0.5);
}
main, footer {
  animation: intro 0.3s both;
  animation-delay: 0.15s;
}
:target {
  color: #fff;
}
/* hack.css overrides and enhancements */
.hack li ul {
  margin: 0;
}
.main {
  padding: 20px 10px;
}
nav a.active {
  background-color: #ff2e88;
  color: #fff;
}
a[itemprop="url"] {
  color: #ff9800;
}
a[itemprop="url"]:hover {
  color: #fff;
}
a[href*="//"]::after {
  /* data uri svg icon. thanks to @Fastidious for the idea */
  content: " " url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20class='i-external'%20viewBox='0%200%2032%2032'%20width='14'%20height='14'%20fill='none'%20stroke='%23ff9800'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='9.38%'%3E%3Cpath%20d='M14%209%20L3%209%203%2029%2023%2029%2023%2018%20M18%204%20L28%204%2028%2014%20M28%204%20L14%2018'/%3E%3C/svg%3E");
}
html {
  font-size: 13px;
}
.hack pre {
  font-size: 17px;
}
article [itemprop="description"] {
  margin-bottom: 20px;
  margin-top: 20px;
}
p {
  hyphens: auto;
  text-align: justify;
}
@media screen and (min-width: 768px) {
  html {
    font-size: 1em;
  }
  .container {
    max-width: 50rem;
  }
}

      
/* the modern clearfix */
.group:after {
  content: "";
  display: table;
  clear: both;
}

figure
{
 display: block;
 position: relative;
 float: left;
 overflow: hidden;
 margin: 0 1% 1% 0;
 }

figcaption
{
 position: absolute;
 background: black;
 background: rgba(0,0,0,0.75);
 color: white;
 padding: 10px 20px;
 opacity: 0;
 transition: all 0.6s ease;
 }

figure img
{
 width: 1024px;
 max-width: 100%;
 }

figure:hover figcaption { opacity: 1; }

figure:before
{
 content: "?";
 position: absolute;
 font-weight: 800;
 background: black;
 background: rgba(255,255,255,0.75);
 text-shadow: 0 0 5px white;
 color: black;
 width: 24px;
 height: 24px;
 border-radius: 12px;
 text-align: center;
 font-size: 14px;
 line-height: 24px;
 transition: all 0.6s ease;
 opacity: 0.75;
 }

figure:hover:before { opacity: 0; }

.cap-left:before { bottom: 10px; left: 10px; }
.cap-left figcaption { bottom: 0; left: -30%; }
.cap-left:hover figcaption { left: 0; }

.cap-right:before { bottom: 10px; right: 10px; }
.cap-right figcaption { bottom: 0; right: -30%; }
.cap-right:hover figcaption { right: 0; }

.cap-top:before { top: 10px; left: 10px; }
.cap-top figcaption { left: 0; top: -30%; }
.cap-top:hover figcaption { top: 0; }

.cap-bot:before { bottom: 10px; left: 10px; }
.cap-bot figcaption { left: 0; bottom: -30%;}
.cap-bot:hover figcaption { bottom: 0; }

    </style>
    
    
  </head>
  
  <body class="hack dark main container">
    <header>
  
  <nav itemscope itemtype="http://schema.org/SiteNavigationElement">
    
    
      <a itemprop="url" class="" href="/"><span itemprop="name">Home</span></a>
    
      <a itemprop="url" class="active" href="/post/"><span itemprop="name">Posts</span></a>
    
      <a itemprop="url" class="" href="/categories/"><span itemprop="name">Catégories</span></a>
    
      <a itemprop="url" class="" href="/tags/"><span itemprop="name">Tags</span></a>
    
  </nav>


</header>
    <main>
  <article itemscope itemtype="http://schema.org/BlogPosting">
    
<meta itemprop="name" content="Hugo Délire !">
<meta itemprop="description" content="Ou comment se faciliter la vie pour la publication de son site
sur github.io avec Hugo (en la rendant d&#39;abord plus compliquée)
">


<meta itemprop="dateModified" content="2017-04-30T18:54:04&#43;02:00" />
<meta itemprop="wordCount" content="1188">



<meta itemprop="keywords" content="administration,big-data,coding,hyperion,admin,bigdata,bridge,debian,git,github-pages,hadoop,hardware,hugo,linux,makefile,network,xen," />

    <header>
      <h1 itemprop="headline">Hugo Délire !</h1>
      <p class="muted"><svg style="margin-bottom:-3px" class="i-clock" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <circle cx="16" cy="16" r="14" />
  <path d="M16 8 L16 16 20 20" />
</svg>
<span>6 minute read</span>
<svg style="margin-bottom: -3px" class="i-edit" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z" />
</svg>

  Published: <time datetime="2017-04-30T18:54:04&#43;02:00">30 Apr, 2017</time>

</p>
    </header>
    
      <blockquote itemprop="description">Ou comment se faciliter la vie pour la publication de son site
sur github.io avec Hugo (en la rendant d&#39;abord plus compliquée)
</blockquote>
    
    
  <details>
    <summary>Table of Contents</summary>
    <nav id="TableOfContents">
<ul>
<li><a href="#github-io">github.io</a></li>
<li><a href="#hugo">Hugo</a></li>
<li><a href="#cette-fois-on-commence-pour-de-vrai">Cette fois on commence pour de vrai</a></li>
<li><a href="#git-worktree">Git worktree</a></li>
<li><a href="#et-voilà">Et voilà</a></li>
<li><a href="#git-ghp">git-ghp</a></li>
</ul>
</nav>
  </details>
  <script>
    const el = document.querySelector('details summary')
    el.onclick = () => {
      (function(l,o,a,d,e,r){e=o.createElement(a),r=o.getElementsByTagName(a)[0];e.async=1;e.src=d;r.parentNode.insertBefore(e,r)})(window,document,'script','/js/smoothscroll.js');
      el.onclick = null
    }
    document.querySelectorAll('#TableOfContents a').forEach(link => {
      link.addEventListener('click', () => {
        document.querySelector(
          link.href.slice(link.href.indexOf('#'))
        ).scrollIntoView({ behavior: 'smooth' })
      })
    })
  </script>


    <div itemprop="articleBody">
      <p>
Alors, pour les nostalgiques !</p>


<div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;">
  <iframe src="//www.youtube.com/embed/VvqwCme7fKM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen frameborder="0"></iframe>
 </div>


<p>En revoyant ça, je me suis dit &quot;OMG yavait déjà de la 3D !&quot;. En même temps,
c'était aussi l'époque de la Playstation 1...</p>

<p>Bon, c'est pas pour ça qu'on est là ! On est des gens sérieux nous !</p>

<h1 id="github-io">github.io</h1>

<p>Pour ceux qui connaissent pas, github offre gratuitement un service permettant
de publier des sites statique, appelé <a href="https://en.wikipedia.org/wiki/GitHub_Pages" target="_blank">Github Pages</a>, pour un site
personnel ou un site lié à un projet hébergé sur github. Je connais pas
l'historique exacte mais le service existe depuis 2008. Date à
laquelle <a href="https://en.wikipedia.org/wiki/Jekyll_(software)" target="_blank">Jekyll</a> a lui aussi vu le jour chez Github donc je suppose que
depuis le début les Github Pages sont liées a Jekyll. Oui car on peut se
contenter de push ses sources Jekyll sur son repository et github.io va
automatiquement générer le site pour nous. Mais c'est pas ce qu'on va
faire... Ce serait trop simple.</p>

<h1 id="hugo">Hugo</h1>

<p>Non, ce qu'on va faire c'est utiliser les Github Pages mais avec un autre
générateur de site statique: <a href="https://gohugo.io/" target="_blank">Hugo</a>. Il fait la même chose que Jekyll, un peu
différemment bien sûr, mais en gros on est un peu sur le même principe: Ecrire
ses post de blog en <a href="http://daringfireball.net/projects/markdown/" target="_blank">markdown</a> avec une entête spéciale nommée &quot;Front Matter&quot;
pour y mettre les métadonnées (titre, date, tags, etc..) et Hugo (ou Jekyll, ou
un autre) s'occupe de générer tout le site. Je résume très grossièrement ici,
mais ce n'est pas le sujet du post. Promis j'en ferai un pour expliquer le
fonctionnement de Hugo 😉</p>

<p>Alors pourquoi Hugo et pas un autre ? Bin, pas toujours facile de répondre a ça,
pourquoi il y en a qui préfère le reglisse aux fraise tagada, et d'autres qui
préfèrent le chocolat au caramel... Mais je sais que j'ai quand même quelques
raisons d'ordre pragmatiques:</p>

<ul>
<li>Il est écrit en <a href="https://golang.org/" target="_blank">Go</a> et j'aime la mascotte du Go ! (j'aime le langage aussi 😉)</li>
<li>Il est plus rapide, <strong>vraiment</strong> plus rapide (40ms pour ce blog entier). Go est
un langage compilé, ça aide beaucoup je pense.</li>
<li>Je connais déjà le langage de template du Go, c'est plus facile pour moi de
customizer mon thème.</li>
<li>Sûrement d'autre trucs, mais on verra ça pour le post consacré a Hugo. Faut
pas hésiter à arrêter pappy Xakz quand il se perd dans ses histoires hors
sujet de la guerre 14-18.</li>
</ul>

<h1 id="cette-fois-on-commence-pour-de-vrai">Cette fois on commence pour de vrai</h1>

<p>Alors, comment on se sert des Github Pages ? Je passe dessus rapidement vu qu'il
y a largement ce qu'il faut en documentation sur <a href="https://help.github.com/categories/github-pages-basics/" target="_blank">Internet</a>.</p>

<p>Pour une page d'utilisateur ou d'organisation, il faut créer un dépôt git nommé
nom-utilisateur.github.io. Pour moi, l'URL complète c'est
donc: <a href="https://github.com/xakz/xakz.github.io" target="_blank">https://github.com/xakz/xakz.github.io</a> Ensuite la branche <code>master</code>
(celle par défaut donc) sera la branche publiée sur <a href="http://xakz.github.io/" target="_blank">http://xakz.github.io/</a></p>

<p>Et pour une page de projet, il suffit de rajouter une branche <code>gh-pages</code>.</p>

<p>Seulement voilà, ces branches <code>master</code> ou <code>gh-pages</code> sont là pour stocker votre
site statique complètement généré (sauf si on utilise Jekyll). Hors, il y a les
sources (le markdown toussa) du site aussi à stocker quelques part et ce serait
déplorable de faire un second dépôt git pour cela.</p>

<p>Donc la solution c'est de créer un branche orpheline dans le même repo. Il faut
voir ça comme d'avoir 2 dépôts sans commit commun dans le même dépôt. Très pratique
je doit dire.</p>

<p>Voilà comment faire:</p>

<ol>
<li><p>Créez un dépôt git nommé <code>votre-pseudo.github.io</code> sur github</p></li>

<li><p>Clonez le à la maison: <code>git clone
git@github.com:votre-pseudo/votre-pseudo.github.io.git</code></p></li>

<li><p>Créz la nouvelle branche orpheline:</p>

<pre><code class="language-sh">git checkout --orphan source
git reset --hard
git commit --allow-empty -m 'Initialize source branch'
</code></pre></li>

<li><p>Un pti push pour être bien: <code>git push -u origin source</code></p></li>
</ol>

<p>Nous avons maintenant une branche <code>master</code> utilisée pour la publication du site
et une branche <code>source</code> utilisée pour le &quot;code source&quot; du site.</p>

<p>Je suggère aussi de définir la branche <code>source</code> comme branche par défaut dans
les paramètres de votre dépôt (à faire sur le site github). Ainsi ce sera la
branche clonée lors d'un <code>git clone</code>.</p>

<h1 id="git-worktree">Git worktree</h1>

<p>Depuis 2015 et sa version 2.5, git permet de travailler sur plusieurs branches
simultanément grâce aux worktree (<code>git help worktree</code>). Alors la fonctionnalité
est encore notée comme expérimentale mais comme on va bosser sur deux branches
totalement indépendantes, il n'y a vraiment aucun risque, même si on utilise des
submodules.</p>

<p>Hugo, et les autres générateurs de site statique, envoient leur sortie vers un
sous dossier (configurable). Nous allons donc définir un sous dossier comme
étant un worktree git pour la branche <code>master</code>, dans le cas de Hugo, le dossier
par défaut s'appelle <code>public</code>:</p>

<pre><code class="language-sh">git worktree add public master
</code></pre>

<p>Le dossier est créé et contient le contenu de la branche <code>master</code> ainsi q'un
fichier <code>.git</code> indiquant à git où se trouve le <code>gitdir</code>.</p>

<h1 id="et-voilà">Et voilà</h1>

<p>On est près a bosser maintenant. Exemple type de procédure, On se trouve dans le
dossier contenant la branche <code>source</code> (ex: <code>~/projects/xakz.github.io</code>):</p>

<ol>
<li>On édite ou crée un nouveau post: <code>hugo new post/super-post.md</code></li>
<li>On pense a se relire et a paufiner 😉</li>
<li>On sauvegarde le fichier</li>
<li>On régénère le site: <code>hugo</code></li>
<li>On vérifie le resultat sur son navigateur: <code>firefox public/index.html</code></li>
<li>On commit: <code>git add .</code> puis <code>git commit -m 'Mon super post'</code> (ici on commit
sur la branche <code>source</code>)</li>
<li>On push (éventuellement): <code>git push</code> (c'est toujours la branche <code>source</code>)</li>
<li>On va dans le dossier <code>public</code>: <code>cd public</code> (là c'est la branche <code>master</code>)</li>
<li>On commit: <code>git add .</code> puis <code>git commit -m 'Nouveau super post'</code></li>
<li>On envoie sur github: <code>git push</code></li>
</ol>

<p>Evidement l'étape 5 peut être avantageusement remplacée par le système de
LiveReload de Hugo (<code>hugo serve</code>), mais il faudra quand même régénérer le site
avec <code>hugo</code> (étape 4) car le LiveReload travaille uniquement en RAM, il ne crée
pas de fichier.</p>

<p>Alors vous me direz: &quot;Mouais, 10 étapes, c'est pas ce qui a de plus simple&quot;. Et
je répondrais que c'est bel et bien vrai, c'est le lot de tout utilisateur de
git, ce gestionnaire de code source est génial mais compliqué et chaque
opération en apparence simple nécéssite souvent plusieurs commandes. Il faut
savoir qu'à la base git fût conçu pour être utilisé par des outils de plus haut
niveau, il devait juste servir de système de stockage avec les hash, toussa
toussa. Mais voilà, il a bien évolué depuis.</p>

<p>Mais j'ai une solution ! Un Makefile ! En réalité un script shell suffirait mais
j'aime bien les Makefile, c'est propre et flexible.</p>

<p>Le voici:</p>

<script src="//gist.github.com/xakz/bf382b2211a9a9fe5364575de6ff3c85.js"></script>

<p>c'est assez simple d'utilisation:</p>

<ul>
<li><code>make</code> pour régénérer le site</li>
<li><code>make publish</code> pour envoyer sur les Github Pages</li>
<li><code>make help</code> pour une aide sur les differentes &quot;target&quot; disponibles</li>
</ul>

<p>Pour les commit sur la branche <code>source</code>, ça reste à vous de le faire, difficile
d'anticiper tous les cas de figure dans un Makefile pour cette partie.</p>

<p>Il gère aussi l'initialisation juste après un <code>git clone</code> pour les submodules et
le worktree <code>master</code> dans le dossier <code>public</code>.</p>

<p>Il n'est pas parfait, mais fonctionne très bien.</p>

<h1 id="git-ghp">git-ghp</h1>

<p>En fait, ce procédé, avec la branche orpheline et le worktree semble tellement
courant pour les Github Pages que je ne suis dit qu'un petit plugin git serait
bien utile. Alors j'ai amorcé un dépôt prévu à cet effet.</p>

<p>Allez voir, j'ai peut-être terminé depuis: <a href="https://github.com/xakz/git-ghp" target="_blank">https://github.com/xakz/git-ghp</a></p>
    </div>
    
    <footer>
      <hr>
      <p>
  Published
  
    
      by <span itemprop="author">Xakz</span>
    
  
  <time datetime="2017-04-30T18:54:04&#43;02:00">
    30 Apr, 2017
  </time>
  
    in <span itemprop="articleSection"><a href="/categories/coding/">Coding</a></span>
  
  
    and tagged <a href="/tags/git/">git</a>, <a href="/tags/github-pages/">github-pages</a>, <a href="/tags/hugo/">hugo</a> and <a href="/tags/makefile/">makefile</a>
  
  using <span itemprop="wordCount">1188</span> words.
</p>

      



    </footer>
  </article>
</main>
    <footer>
  
  <p class="muted">
    This page was generated using
    <a target="_blank" rel="noopener" href="https://comfusion.github.io/after-dark/">After Dark</a>
    for
    <a target="_blank" rel="noopener" href="https://gohugo.io/">Hugo</a>.
  </p>


</footer>
  </body>
</html>
